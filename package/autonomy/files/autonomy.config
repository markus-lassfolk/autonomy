# autonomy Default Configuration
# This is the default configuration installed with the autonomy package
# Modify this file to customize your failover settings

# =============================================================================
# CORE SYSTEM CONFIGURATION
# =============================================================================
config autonomy 'main'
    # Basic daemon control
    option enable '1'
    option use_mwan3 '1'
    option log_level 'info'
    option log_file ''

    # Timing and intervals
    option poll_interval_ms '2000'
    option history_window_s '600'
    option min_uptime_s '30'
    option cooldown_s '30'

    # Memory and storage
    option retention_hours '24'
    option max_ram_mb '16'

    # Decision making
    option predictive '1'
    option switch_margin '15'
    option data_cap_mode 'balanced'

    # Service endpoints
    option metrics_listener '0'
    option health_listener '1'

    # Performance and Security
    option performance_profiling '0'
    option security_auditing '1'
    option profiling_enabled '0'
    option auditing_enabled '1'
    option max_failed_attempts '5'
    option block_duration '300'

# =============================================================================
# NETWORK THRESHOLDS
# =============================================================================
config thresholds 'failover'
    # When to trigger failover
    option loss '8'            # Packet loss percentage
    option latency '1500'      # Latency in milliseconds
    option min_duration_s '15' # Minimum duration before failover

config thresholds 'restore'
    # When to restore/failback
    option loss '2'            # Packet loss percentage
    option latency '1000'      # Latency in milliseconds
    option min_duration_s '45' # Minimum duration before restore

# =============================================================================
# STARLINK API CONFIGURATION
# =============================================================================
config starlink 'api'
    option host '192.168.100.1'
    option port '9200'
    option timeout_s '10'
    option grpc_first '1'
    option http_first '0'

# =============================================================================
# MACHINE LEARNING
# =============================================================================
config ml 'settings'
    option enabled '1'
    option model_path '/etc/autonomy/models.json'
    option training '1'
    option prediction '1'

# =============================================================================
# MONITORING ENDPOINTS
# =============================================================================
config monitoring 'mqtt'
    option broker ''
    option topic 'autonomy/status'
    option username ''
    option password ''
    option tls '0'

# =============================================================================
# NOTIFICATIONS
# =============================================================================
config notifications 'pushover'
    option enabled '0'
    option token ''
    option user ''
    option priority '0'

# =============================================================================
# INTERFACE CONFIGURATIONS
# =============================================================================
# Starlink interface (typically wan)
config interface 'starlink'
    option name 'wan'
    option type 'starlink'
    option priority '1'
    option enabled '1'
    option metered '0'

# Cellular interface (typically wwan)
config interface 'cellular'
    option name 'wwan'
    option type 'cellular'
    option priority '2'
    option enabled '1'
    option metered '1'

# WiFi interface (typically wlan)
config interface 'wifi'
    option name 'wlan'
    option type 'wifi'
    option priority '3'
    option enabled '1'
    option metered '0'

# LAN interface (fallback)
config interface 'lan'
    option name 'lan'
    option type 'lan'
    option priority '4'
    option enabled '1'
    option metered '0'

